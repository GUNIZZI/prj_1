"use strict";(self["webpackChunk_cjmia_dashboard"]=self["webpackChunk_cjmia_dashboard"]||[]).push([[715],{4715:function(t,a,e){e.r(a),e.d(a,{default:function(){return g}});var s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"ui-loader-container",class:{"is-loading":t.loading},attrs:{id:"content"}},[a("h2",{staticClass:"ui_invisible",attrs:{id:"page_title"}}),a("main",{staticClass:"wrap is-hgt100"},[a("div",{staticClass:"contents"},[a("div",{staticClass:"wrap"},[a("CompCategoryAdd",{staticClass:"category_add",attrs:{id:"category_add",type:"add"},on:{categoryAdd:t.evt_categoryAdd}}),a("div",{staticClass:"common_code"},[t._l(t.datas,(function(e,s){return[a("CompCategory",{key:e.code,attrs:{item:t.datas[s]},on:{"update:item":function(a){return t.$set(t.datas,s,a)},categoryMdfy:t.evt_categoryMdfy,categoryRemove:t.evt_categoryRemove,fetchCommonCodes:t.fetchCommonCodes}})]}))],2)],1)])])])},o=[],d=e(9362),i=e(5846),n=e(8813),c=e(119),r=e(8482),l={name:"page-admin-common",components:{CompCategory:n.Z,CompCategoryAdd:c.Z},data(){return{apiUID_category_update:d.V.v4(),loading:!1,datas:[],addCategory:{name:""}}},mounted(){this.fetchCommonCodes()},methods:{async fetchCommonCodes(){this.loading=!0,await this.$store.dispatch("opts/ATTRS",{}).then((t=>{this.datas=t.data?.result?.list})).catch((t=>{this.$store.dispatch("DIALOG_ERR",["데이터를 로드하지 못했습니다.<br>확인을 누르시면 새로고침 됩니다.<br>문제가 지속 될 경우 관리자에게 문의하세요.","로드 실패",0]).then((t=>{location.reload()})).catch((t=>{}))})).finally((()=>{this.loading=!1}))},async updateCategory(t){this.loading=!0,await(0,r.a)(this.apiUID_category_update,t).catch((()=>{this.$store.dispatch("NOTY_ERR","카테고리 생성에 실패 했습니다.")})).finally((()=>{this.loading=!1,this.fetchCommonCodes()}))},evt_categoryAdd(t){this.updateCategory({type:"i",level:1,name:t.name})},evt_categoryMdfy(t){this.updateCategory({type:"u",level:1,name:t.name,seq:t.seq})},evt_categoryRemove(t){const a=[(0,i.Ai)(this.datas,{seq:t.seq})].flatten().arrObjAttrToStr("seq");a&&this.updateCategory({type:"d",level:1,seq:a})}}},h=l,m=e(3483),y=(0,m.Z)(h,s,o,!1,null,"1a2617ce",null),g=y.exports}}]);