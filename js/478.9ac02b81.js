"use strict";(self["webpackChunk_cjmia_dashboard"]=self["webpackChunk_cjmia_dashboard"]||[]).push([[478],{566:function(t,a,s){s.r(a),s.d(a,{default:function(){return L}});var e=function(){var t=this,a=t._self._c;return a("div",{staticClass:"ui-loader-container",class:{"is-loading":t.loading},attrs:{id:"content"}},[a("h2",{staticClass:"ui_invisible",attrs:{id:"page_title"}}),a("main",{staticClass:"wrap is-hgt100"},[a("div",{staticClass:"contents"},[a("div",{staticClass:"wrap"},[a("div",{staticClass:"ui_row"},[a("div",{staticClass:"wrap"},[a("div",{staticClass:"ui_col"},[a("List",{attrs:{savePersonalization:t.savePersonalization,dataList:t.dataList,dataSet:t.dataSet,editItem:t.editItem},on:{"update:savePersonalization":function(a){t.savePersonalization=a},"update:save-personalization":function(a){t.savePersonalization=a},"update:editItem":function(a){t.editItem=a},"update:edit-item":function(a){t.editItem=a},update:t.evtUpdate}})],1)])])])])]),a("aside",{directives:[{name:"control-aside-width",rawName:"v-control-aside-width",value:"admin_snsacount",expression:"`admin_snsacount`"}],staticStyle:{"min-width":"390px","max-width":"800px"}},[a("div",{staticClass:"ui_row"},[a("div",{staticClass:"wrap"},[a("div",{staticClass:"ui_col"},[a("CompAsideAcount",{attrs:{editItem:t.editItem,autocompleteList:t.dataSet.mediaAutocompleteList,snsList:t.dataSet.snsMaster},on:{setEditItem:t.evtEdit,update:t.evtUpdate}})],1)])])])])},i=[],n=(s(823),s(5791),s(9362)),d=s(4922),o=s(2568),c=s.n(o),r=s(5846),l=s(6358),u=s(4580),p=s(1809),m=(s(8943),s(7693));function h(t,a){const s=(0,m.dD)("/api/admin/sns/?cmd=NM",a);return(0,p.Z)({id:t,url:s.path,method:"post",data:s.data})}function _(t,a){const s=(0,m.dD)("/api/admin/sns/?cmd=EL",a);return(0,p.Z)({id:t,url:s.path,method:"post",data:s.data})}function v(t,a){const s=(0,m.dD)("/api/admin/sns/?cmd=NL",a);return(0,p.Z)({id:t,url:s.path,method:"post",data:s.data})}function f(t,a){const s=(0,m.dD)("/api/admin/sns/?cmd=ES",a);return(0,p.Z)({id:t,url:s.path,method:"post",data:s.data})}var S={name:"page-admin-snsacount",data(){return{apiUID:n.V.v4(),loading:!1,savePersonalization:{main:{data_list:{colOpts:{site_name:!0,sns_seq:!0,url:!0,reg_dt:!0}}}},dataSet:{snsMaster:[],mediaAutocompleteList:[]},dataList:[],editItem:{}}},components:{List:l["default"],CompAsideAcount:u["default"]},async beforeRouteEnter(t,a,s){let e=[];await h(n.V.v4()).then((t=>{e=t.data?.result?.list})).catch((t=>{this.store.dispatch("DIALOG_ERR",["SNS 마스터 목록을 가져오지 못했습니다.<br>확인을 누르시면 새로고침 됩니다.<br>문제가 지속 될 경우 관리자에게 문의하세요.","SNS 마스터 목록 조회 실패",0]).then((t=>{location.reload()})).catch((t=>{}))})),await _(n.V.v4()).then((t=>{s((a=>{a.dataSet.snsMaster=(0,r.r0)(e,{sns_name:"name",sns_seq:"code"}),a.dataSet.mediaAutocompleteList=t.data?.result?.list.map((t=>{const a={code:t,name:t};return t=a,t}))}))})).catch((t=>{this.store.dispatch("DIALOG_ERR",["매체 자동완성 목록을 가져오지 못했습니다.<br>확인을 누르시면 새로고침 됩니다.<br>문제가 지속 될 경우 관리자에게 문의하세요.","SNS 마스터 목록 조회 실패",0]).then((t=>{location.reload()})).catch((t=>{}))}))},created(){const t=(0,d.hS)("personalization");this.savePersonalization=c()(this.savePersonalization,t?.admin_snsacount)},mounted(){this.fetchDatas()},watch:{savePersonalization:{deep:!0,handler(t){const a=(0,d.hS)("personalization"),s={...a,admin_snsacount:{...a?.admin_snsacount,main:{...a?.admin_snsacount?.main,...t.main}}};(0,d.VV)("personalization",s)}}},methods:{async fetchDatas(){this.loading=!0,await v(this.apiUID).then((t=>{const a=structuredClone(t.data);this.dataList=a?.result?.list||[]})).finally((()=>{this.loading=!1}))},async updateSns(t){this.loading=!0;const a=n.V.v4();await f(a,t).then((a=>{this.$store.dispatch("NOTY_COM",`계정 ${"i"==t.type?"추가를":"u"==t.type?"수정을":"삭제를"} 성공 했습니다.`),this.loading=!1,this.fetchDatas()})).catch((a=>{this.$store.dispatch("DIALOG_ERR",[`계정 ${"i"==t.type?"추가를":"u"==t.type?"수정을":"삭제를"} 실패 했습니다.<br>확인을 누르시면 새로고침 됩니다.<br>문제가 지속 될 경우 관리자에게 문의하세요.`,"계정 "+("i"==t.type?"추가":"u"==t.type?"수정":"삭제"),0]).then((()=>{location.reload()}))}))},evtEdit(t){this.editItem=structuredClone(t)},evtUpdate(t){const a={type:t.type,site_name:t.site_name,sns_seq:t.sns_seq,sns_name:t.sns_name,url:t.url};"u"!=a.type&&"d"!=a.type||(a.seq=t.seq),"d"==a.type&&(delete a.site_name,delete a.sns_seq,delete a.sns_name,delete a.url),"d"==a.type?this.$store.dispatch("DIALOG_QST",["해당 계정을 삭제 하시겠습니까?","계정 삭제",2]).then((t=>{this.updateSns(a)})):this.updateSns(a)}}},w=S,C=s(3483),y=(0,C.Z)(w,e,i,!1,null,"00d28ba0",null),L=y.exports}}]);